(()=>{"use strict";const t=(()=>{const t=document.querySelector(".P1"),e=document.querySelector(".P2"),a=()=>{e.classList.add("active")};return a(),{init:a,renderGameboard:(a,i,s)=>{const r="P1"===a?t:e;r.classList.add(i),s.forEach((t=>r.appendChild((t=>{const e=document.createElement("div");return e.classList.add("cell"),e.setAttribute("data-coords",`${t.coords.x} ${t.coords.y}`),t.hasShip&&e.classList.add("ship"),(t=>{t.addEventListener("click",(()=>{const e=t.getAttribute("data-coords").split(" "),a={x:+e[0],y:+e[1]};o.fireAttack(a)}))})(e),e})(t))))},cellHit:t=>{const e=`${t.x} ${t.y}`;document.querySelector(`.active > [data-coords="${e}"]`).classList.add("hit")},toggleActiveBoard:()=>{t.classList.toggle("active"),e.classList.toggle("active")}}})(),e=e=>{const a=[],i=(t=>{const e=[];for(let a=0;a<t*t;a++)e.push({coords:{x:a%t,y:Math.floor(a/t)},hasShip:"",isShot:!1});return e})(e),s=t=>i[t.x+t.y*e];return{at:s,isValidAttack:t=>!s(t).isShot,receiveAttack:e=>{const i=s(e);if(i.isShot=!0,t.cellHit(e),i.hasShip){const t=a.find((t=>t.name===i.hasShip));t.hit(),t.isSunk()&&console.log(t.name)}},setShip:(t,e,i="x")=>{a.push(t);let o=e;for(let e=0;e<t.getLength();e++)s(o).hasShip=t.name,"x"===i?o.x++:o.y++},getBoard:()=>i}},a=t=>({name:t,gameboard:e(10),isActive:!1}),i=(t,e)=>{const a=t;let i=0;return{name:e,getLength:()=>a,getHits:()=>i,hit:()=>{i++},isSunk:()=>a===i}},s=t=>{const e=t.filter((t=>!t.isShot));return e[Math.floor(Math.random()*e.length)].coords},o=(()=>{const e=a("player"),o=a("enemy"),r=()=>e.isActive?o:e,c=()=>{e.isActive=!e.isActive,o.isActive=!o.isActive,t.toggleActiveBoard()};return{init:()=>{(()=>{e.isActive=!0;let a=[i(4,"ak"),i(2,"b")];e.gameboard.setShip(a[0],{x:1,y:2},"x"),e.gameboard.setShip(a[1],{x:2,y:5},"y"),t.renderGameboard("P1",e.name,e.gameboard.getBoard())})(),(()=>{o.isActive=!1;let e=[i(3,"enemya"),i(2,"enemyb")];o.gameboard.setShip(e[0],{x:1,y:1},"x"),o.gameboard.setShip(e[1],{x:2,y:5},"y"),t.renderGameboard("P2",o.name,o.gameboard.getBoard())})()},fireAttack:t=>{r().gameboard.isValidAttack(t)&&(r().gameboard.receiveAttack(t),(async()=>{c(),await new Promise((t=>setTimeout(t,300)));const t=s(r().gameboard.getBoard());r().gameboard.receiveAttack(t),c()})())}}})();o.init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSUssU0FBUUMsR0FBV0MsV0FBV0QsRUFtQzdCLE9BQ1osTUFBTXhELEVBQVMsRUFBYWlELElBQVdYLFVBQVVELFlBQ2pEWSxJQUFXWCxVQUFVYixjQUFjekIsR0FDbkNrRCxLQVVBUSxPQXREbUIsR0NIdkIsVSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvTW9kdWxlcy9VSS5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL0ZhY3Rvcmllcy9HYW1lYm9hcmQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9GYWN0b3JpZXMvUGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvRmFjdG9yaWVzL1NoaXAuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9Nb2R1bGVzL0FJUGxheWVyLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvTW9kdWxlcy9HYW1lQ29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHYW1lQ29udHJvbGxlciBmcm9tIFwiLi9HYW1lQ29udHJvbGxlclwiO1xuXG5cbmNvbnN0IFVJID0gKCgpID0+IHtcbiAgY29uc3QgJHAxR2FtZWJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLlAxJyk7XG4gIGNvbnN0ICRwMkdhbWVib2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5QMicpO1xuICBcbiAgY29uc3QgbmV3Q2VsbERPTSA9IChjZWxsKSA9PiB7XG4gICAgICBjb25zdCAkY2VsbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgJGNlbGwuY2xhc3NMaXN0LmFkZCgnY2VsbCcpO1xuICAgICAgJGNlbGwuc2V0QXR0cmlidXRlKCdkYXRhLWNvb3JkcycsIGAke2NlbGwuY29vcmRzLnh9ICR7Y2VsbC5jb29yZHMueX1gKTtcbiAgICAgIGlmIChjZWxsLmhhc1NoaXApICRjZWxsLmNsYXNzTGlzdC5hZGQoJ3NoaXAnKTtcbiAgICAgIGFkZENlbGxMaXN0ZW5lcigkY2VsbCk7XG4gICAgICByZXR1cm4gJGNlbGw7XG4gIH1cblxuICBjb25zdCBhZGRDZWxsTGlzdGVuZXIgPSAoJGNlbGwpID0+IHtcbiAgICAkY2VsbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvb3Jkc0FycmF5ID0gJGNlbGwuZ2V0QXR0cmlidXRlKCdkYXRhLWNvb3JkcycpLnNwbGl0KCcgJyk7XG4gICAgICBjb25zdCBjb29yZHMgPSB7eDogK2Nvb3Jkc0FycmF5WzBdLCB5OiArY29vcmRzQXJyYXlbMV19O1xuICAgICAgR2FtZUNvbnRyb2xsZXIuZmlyZUF0dGFjayhjb29yZHMpO1xuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgY2VsbEhpdCA9IChjb29yZHMpID0+IHtcbiAgICBjb25zdCBlbmNvZGVkQ29vcmRzID0gYCR7Y29vcmRzLnh9ICR7Y29vcmRzLnl9YDtcbiAgICBjb25zdCAkY2VsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5hY3RpdmUgPiBbZGF0YS1jb29yZHM9XCIke2VuY29kZWRDb29yZHN9XCJdYCk7XG4gICAgJGNlbGwuY2xhc3NMaXN0LmFkZCgnaGl0Jyk7XG4gIH1cblxuICBjb25zdCB0b2dnbGVBY3RpdmVCb2FyZCA9ICgpID0+IHtcbiAgICAkcDFHYW1lYm9hcmQuY2xhc3NMaXN0LnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgJHAyR2FtZWJvYXJkLmNsYXNzTGlzdC50b2dnbGUoJ2FjdGl2ZScpO1xuICB9XG5cbiAgY29uc3QgcmVuZGVyR2FtZWJvYXJkID0gKHBsYXllciwgcGxheWVyTmFtZSwgYm9hcmQpID0+IHtcbiAgICBjb25zdCAkYm9hcmQgPSBwbGF5ZXIgPT09ICdQMScgPyAkcDFHYW1lYm9hcmQgOiAkcDJHYW1lYm9hcmQ7XG4gICAgJGJvYXJkLmNsYXNzTGlzdC5hZGQocGxheWVyTmFtZSk7XG4gICAgYm9hcmQuZm9yRWFjaChjZWxsID0+ICRib2FyZC5hcHBlbmRDaGlsZChuZXdDZWxsRE9NKGNlbGwpKSk7XG4gIH1cblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgICRwMkdhbWVib2FyZC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfVxuXG4gIGluaXQoKTtcblxuICByZXR1cm4ge1xuICAgIGluaXQsXG4gICAgcmVuZGVyR2FtZWJvYXJkLFxuICAgIGNlbGxIaXQsXG4gICAgdG9nZ2xlQWN0aXZlQm9hcmQsXG4gIH07XG5cbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IFVJOyIsImltcG9ydCBVSSBmcm9tIFwiLi4vTW9kdWxlcy9VSVwiO1xuXG5jb25zdCBHYW1lYm9hcmQgPSAoc2l6ZSkgPT4ge1xuXG4gIGNvbnN0IHNoaXBzID0gW107XG5cbiAgY29uc3QgY2VsbCA9ICh4LCB5KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvb3Jkczoge3gsIHl9LFxuICAgICAgaGFzU2hpcDogJycsXG4gICAgICBpc1Nob3Q6IGZhbHNlXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IF9tYWtlR3JpZCA9IChzaXplKSA9PiB7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplICogc2l6ZTsgaSsrKSB7XG4gICAgICBhcnIucHVzaChjZWxsKGkgJSBzaXplLCBNYXRoLmZsb29yKGkgLyBzaXplKSkpO1xuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9XG5cbiAgY29uc3QgYm9hcmQgPSBfbWFrZUdyaWQoc2l6ZSk7XG4gIGNvbnN0IGF0ID0gKGNvb3JkcykgPT4gYm9hcmRbY29vcmRzLnggKyBjb29yZHMueSAqIHNpemVdO1xuXG4gIGNvbnN0IGlzVmFsaWRBdHRhY2sgPSAoY29vcmRzKSA9PiB7XG4gICAgcmV0dXJuICFhdChjb29yZHMpLmlzU2hvdDtcbiAgfVxuXG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoY29vcmRzKSA9PiB7XG4gICAgY29uc3QgY2VsbCA9IGF0KGNvb3Jkcyk7XG4gICAgY2VsbC5pc1Nob3QgPSB0cnVlO1xuICAgIFVJLmNlbGxIaXQoY29vcmRzKTtcbiAgICBpZiAoY2VsbC5oYXNTaGlwKSB7XG4gICAgICBjb25zdCBzaGlwID0gc2hpcHMuZmluZChzaGlwID0+IHNoaXAubmFtZSA9PT0gY2VsbC5oYXNTaGlwKTtcbiAgICAgIHNoaXAuaGl0KCk7XG4gICAgICBpZiAoc2hpcC5pc1N1bmsoKSkgY29uc29sZS5sb2coc2hpcC5uYW1lKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBzZXRTaGlwID0gKHNoaXAsIGNvb3JkcywgYXhpcyA9ICd4JykgPT4ge1xuICAgIHNoaXBzLnB1c2goc2hpcCk7XG4gICAgbGV0IG5ld0Nvb3JkcyA9IGNvb3JkcztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAuZ2V0TGVuZ3RoKCk7IGkrKykge1xuICAgICAgYXQobmV3Q29vcmRzKS5oYXNTaGlwID0gc2hpcC5uYW1lO1xuICAgICAgYXhpcyA9PT0gJ3gnID8gbmV3Q29vcmRzLngrKzogbmV3Q29vcmRzLnkrKztcbiAgICB9XG4gIH1cblxuICBjb25zdCBnZXRCb2FyZCA9ICgpID0+IGJvYXJkO1xuXG4gIHJldHVybiB7XG4gICAgYXQsXG4gICAgaXNWYWxpZEF0dGFjayxcbiAgICByZWNlaXZlQXR0YWNrLFxuICAgIHNldFNoaXAsXG4gICAgZ2V0Qm9hcmQsXG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWVib2FyZDsiLCJpbXBvcnQgR2FtZWJvYXJkIGZyb20gXCIuL0dhbWVib2FyZFwiXG5cbmNvbnN0IFBsYXllciA9IChuYW1lKSA9PiB7XG4gIHJldHVybiB7XG4gICAgbmFtZSxcbiAgICBnYW1lYm9hcmQ6IEdhbWVib2FyZCgxMCksXG4gICAgaXNBY3RpdmU6IGZhbHNlLFxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBQbGF5ZXI7IiwiY29uc3QgU2hpcCA9IChsZW5ndGgsIG5hbWUpID0+IHtcbiAgY29uc3Qgc2hpcExlbmd0aCA9IGxlbmd0aDtcbiAgbGV0IGhpdENvdW50ID0gMDtcblxuICAvLyBHZXR0ZXJzXG4gIGNvbnN0IGdldExlbmd0aCA9ICgpID0+IHNoaXBMZW5ndGg7XG4gIGNvbnN0IGdldEhpdHMgPSAoKSA9PiBoaXRDb3VudDtcblxuICBjb25zdCBoaXQgPSAoKSA9PiB7XG4gICAgaGl0Q291bnQrKztcbiAgfVxuXG4gIGNvbnN0IGlzU3VuayA9ICgpID0+IHtcbiAgICByZXR1cm4gc2hpcExlbmd0aCA9PT0gaGl0Q291bnQ7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG5hbWUsXG4gICAgZ2V0TGVuZ3RoLFxuICAgIGdldEhpdHMsXG4gICAgaGl0LFxuICAgIGlzU3VuayxcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgU2hpcDsiLCJjb25zdCBBSSA9ICgoKSA9PiB7XG5cbiAgY29uc3QgZ2V0Q29vcmRzID0gKGJvYXJkKSA9PiB7XG4gICAgY29uc3QgdmFsaWRDZWxscyA9IGJvYXJkLmZpbHRlcihjZWxsID0+ICFjZWxsLmlzU2hvdCk7XG4gICAgY29uc3QgY29vcmRzID0gdmFsaWRDZWxsc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB2YWxpZENlbGxzLmxlbmd0aCldLmNvb3JkcztcbiAgICByZXR1cm4gY29vcmRzO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2V0Q29vcmRzLFxuICB9O1xuXG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBBSTsiLCJpbXBvcnQgUGxheWVyIGZyb20gXCIuLi9GYWN0b3JpZXMvUGxheWVyXCJcbmltcG9ydCBTaGlwIGZyb20gXCIuLi9GYWN0b3JpZXMvU2hpcFwiO1xuaW1wb3J0IFVJIGZyb20gXCIuL1VJXCI7XG5pbXBvcnQgQUkgZnJvbSBcIi4vQUlQbGF5ZXJcIjtcblxuY29uc3QgR2FtZUNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuXG4gIGNvbnN0IHBsYXllcjEgPSBQbGF5ZXIoJ3BsYXllcicpO1xuICBjb25zdCBwbGF5ZXIyID0gUGxheWVyKCdlbmVteScpO1xuXG4gIGZ1bmN0aW9uIHNsZWVwKG1zKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuICB9IFxuXG4gIC8vIGNvbnN0IGFjdGl2ZVBsYXllciA9ICgpID0+IHtcbiAgLy8gICByZXR1cm4gcGxheWVyMS5pc0FjdGl2ZSA/IHBsYXllcjE6IHBsYXllcjI7XG4gIC8vIH1cblxuICBjb25zdCBvcHBvbmVudCA9ICgpID0+IHtcbiAgICByZXR1cm4gcGxheWVyMS5pc0FjdGl2ZSA/IHBsYXllcjI6IHBsYXllcjE7XG4gIH1cblxuICBjb25zdCB0b2dnbGVBY3RpdmVQbGF5ZXIgPSAoKSA9PiB7XG4gICAgcGxheWVyMS5pc0FjdGl2ZSA9ICFwbGF5ZXIxLmlzQWN0aXZlO1xuICAgIHBsYXllcjIuaXNBY3RpdmUgPSAhcGxheWVyMi5pc0FjdGl2ZTtcbiAgICBVSS50b2dnbGVBY3RpdmVCb2FyZCgpO1xuICB9XG5cbiAgY29uc3QgaW5pdFBsYXllcjEgPSAoKSA9PiB7XG4gICAgcGxheWVyMS5pc0FjdGl2ZSA9IHRydWU7XG4gICAgbGV0IHNoaXBzID0gW1NoaXAoNCwgJ2FrJyksIFNoaXAoMiwgJ2InKV07XG4gICAgcGxheWVyMS5nYW1lYm9hcmQuc2V0U2hpcChzaGlwc1swXSwge3g6IDEsIHk6IDJ9LCAneCcpO1xuICAgIHBsYXllcjEuZ2FtZWJvYXJkLnNldFNoaXAoc2hpcHNbMV0sIHt4OiAyLCB5OiA1fSwgJ3knKTtcbiAgICBVSS5yZW5kZXJHYW1lYm9hcmQoJ1AxJywgcGxheWVyMS5uYW1lLCBwbGF5ZXIxLmdhbWVib2FyZC5nZXRCb2FyZCgpKTtcbiAgfVxuXG4gIGNvbnN0IGluaXRQbGF5ZXIyID0gKCkgPT4ge1xuICAgIHBsYXllcjIuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICBsZXQgc2hpcHMgPSBbU2hpcCgzLCAnZW5lbXlhJyksIFNoaXAoMiwgJ2VuZW15YicpXTtcbiAgICBwbGF5ZXIyLmdhbWVib2FyZC5zZXRTaGlwKHNoaXBzWzBdLCB7eDogMSwgeTogMX0sICd4Jyk7XG4gICAgcGxheWVyMi5nYW1lYm9hcmQuc2V0U2hpcChzaGlwc1sxXSwge3g6IDIsIHk6IDV9LCAneScpO1xuICAgIFVJLnJlbmRlckdhbWVib2FyZCgnUDInLCBwbGF5ZXIyLm5hbWUsIHBsYXllcjIuZ2FtZWJvYXJkLmdldEJvYXJkKCkpO1xuICB9XG5cbiAgY29uc3QgcGxheVJvdW5kID0gYXN5bmMgKCkgPT4ge1xuICAgIHRvZ2dsZUFjdGl2ZVBsYXllcigpO1xuICAgIGF3YWl0IHNsZWVwKDMwMCk7XG4gICAgY29uc3QgY29vcmRzID0gQUkuZ2V0Q29vcmRzKG9wcG9uZW50KCkuZ2FtZWJvYXJkLmdldEJvYXJkKCkpO1xuICAgIG9wcG9uZW50KCkuZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRzKTtcbiAgICB0b2dnbGVBY3RpdmVQbGF5ZXIoKTtcbiAgfVxuXG4gIGNvbnN0IHBsYXlHYW1lID0gKCkgPT4ge1xuICAgIC8vIHBsYXlSb3VuZCgpO1xuICB9XG5cbiAgY29uc3QgZmlyZUF0dGFjayA9IChjb29yZHMpID0+IHtcbiAgICBpZiAoIW9wcG9uZW50KCkuZ2FtZWJvYXJkLmlzVmFsaWRBdHRhY2soY29vcmRzKSkgcmV0dXJuO1xuICAgIG9wcG9uZW50KCkuZ2FtZWJvYXJkLnJlY2VpdmVBdHRhY2soY29vcmRzKTtcbiAgICBwbGF5Um91bmQoKTtcbiAgfVxuXG4gIGNvbnN0IGluaXQgPSAoKSA9PiB7XG4gICAgaW5pdFBsYXllcjEoKTtcbiAgICBpbml0UGxheWVyMigpO1xuICAgIHBsYXlHYW1lKCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBpbml0LFxuICAgIGZpcmVBdHRhY2ssXG4gIH07XG5cbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWVDb250cm9sbGVyOyIsImltcG9ydCBHYW1lQ29udHJvbGxlciBmcm9tIFwiLi9Nb2R1bGVzL0dhbWVDb250cm9sbGVyXCI7XG5cbkdhbWVDb250cm9sbGVyLmluaXQoKTsiXSwibmFtZXMiOlsiJHAxR2FtZWJvYXJkIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiJHAyR2FtZWJvYXJkIiwiaW5pdCIsImNsYXNzTGlzdCIsImFkZCIsInJlbmRlckdhbWVib2FyZCIsInBsYXllciIsInBsYXllck5hbWUiLCJib2FyZCIsIiRib2FyZCIsImZvckVhY2giLCJjZWxsIiwiYXBwZW5kQ2hpbGQiLCIkY2VsbCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjb29yZHMiLCJ4IiwieSIsImhhc1NoaXAiLCJhZGRFdmVudExpc3RlbmVyIiwiY29vcmRzQXJyYXkiLCJnZXRBdHRyaWJ1dGUiLCJzcGxpdCIsImFkZENlbGxMaXN0ZW5lciIsIm5ld0NlbGxET00iLCJjZWxsSGl0IiwiZW5jb2RlZENvb3JkcyIsInRvZ2dsZUFjdGl2ZUJvYXJkIiwidG9nZ2xlIiwic2l6ZSIsInNoaXBzIiwiYXJyIiwiaSIsInB1c2giLCJNYXRoIiwiZmxvb3IiLCJpc1Nob3QiLCJfbWFrZUdyaWQiLCJhdCIsImlzVmFsaWRBdHRhY2siLCJyZWNlaXZlQXR0YWNrIiwic2hpcCIsImZpbmQiLCJuYW1lIiwiaGl0IiwiaXNTdW5rIiwiY29uc29sZSIsImxvZyIsInNldFNoaXAiLCJheGlzIiwibmV3Q29vcmRzIiwiZ2V0TGVuZ3RoIiwiZ2V0Qm9hcmQiLCJnYW1lYm9hcmQiLCJpc0FjdGl2ZSIsImxlbmd0aCIsInNoaXBMZW5ndGgiLCJoaXRDb3VudCIsImdldEhpdHMiLCJ2YWxpZENlbGxzIiwiZmlsdGVyIiwicmFuZG9tIiwicGxheWVyMSIsInBsYXllcjIiLCJvcHBvbmVudCIsInRvZ2dsZUFjdGl2ZVBsYXllciIsImluaXRQbGF5ZXIxIiwiaW5pdFBsYXllcjIiLCJmaXJlQXR0YWNrIiwiYXN5bmMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJwbGF5Um91bmQiXSwic291cmNlUm9vdCI6IiJ9